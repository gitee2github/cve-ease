# -*- coding: utf-8 -*-

"""
 (c) 2023 - Copyright CTyunOS Inc

 Authors:
   youyifeng <youyf2@chinatelecom.cn>

"""

import datetime
import requests
import json


class Scraper:
    def __init__(self, config):
        self.config = config
        pass

    def prune_sql_table(self):
        pass

    def scrapy(self):
        api_url = 'https://www.openeuler.org/api-cve/cve-security-notice-server/cvedatabase/findAll'
        body = {"keyword": "", "status": "", "pages": {"page": 1, "size": 1000000}}
        try:
            response = requests.post(url=api_url, json=body)
            response_json_dict = json.loads(response.text)
        except Exception as e:
            print("scrapy from api '%s' error!" % api_url, str(e))
            exit(1)
        return response_json_dict
