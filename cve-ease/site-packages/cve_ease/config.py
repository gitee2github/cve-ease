# -*- coding: utf-8 -*-

"""
 (c) 2023 - Copyright CTyunOS Inc

 Authors:
   youyifeng <youyf2@chinatelecom.cn>

"""

from __future__ import unicode_literals, absolute_import

import os
import configparser


def load_config(configfile):
    default_values = {
        'main': {
            "log_level": "debug",
            "log_file_path": "/var/log/cve-ease/cve-ease.log",
            "db_type": "sqlite",
            "db_file_path": "/usr/share/cve-ease/cve-ease.db",
            "db_type": "sqlite",
            "db_user": "",
            "db_password": "",
            "db_host": "",
            "db_port": "",
            "pid_file_path": "/var/log/cve-ease/cve-ease.pid",
            "lock_file_path": "/var/log/cve-ease/cve-ease.lock",
        }
    }
    config = configparser.ConfigParser()
    # read default config from default ditct
    config.read_dict(default_values)
    if not os.path.exists(configfile):
        print("%s config file not found!" % configfile)
        exit(1)
    # reload config from configfile
    config.read(configfile)

    return config
