<!-- MDTOC maxdepth:6 firsth1:1 numbering:0 flatten:0 bullets:1 updateOnSave:1 -->

- [cve-ease project](#cve-ease-project)   
   - [介绍](#介绍)   
   - [软件架构](#软件架构)   
   - [安装教程](#安装教程)   
      - [直接安装](#直接安装)   
      - [容器安装](#容器安装)   
      - [rpm包安装](#rpm包安装)   
   - [使用说明](#使用说明)   
      - [帮助信息](#帮助信息)   
      - [basic基础命令](#basic基础命令)   
         - [config配置相关子命令](#config配置相关子命令)   
         - [daemon服务](#daemon服务)   
         - [motd更新通知相关子命令](#motd更新通知相关子命令)   
         - [service相关子命令](#service相关子命令)   
      - [info类别命令](#info类别命令)   
         - [cve子命令](#cve子命令)   
         - [sa命令](#sa命令)   
         - [cvrf子命令](#cvrf子命令)   
      - [notifier消息通知类命令](#notifier消息通知类命令)   
         - [wecom企业微信聊天机器人](#wecom企业微信聊天机器人)   
         - [dingding钉钉聊天机器人](#dingding钉钉聊天机器人)   
         - [feishu飞书聊天机器人](#feishu飞书聊天机器人)   
         - [mail163邮箱](#mail163邮箱)   
         - [mailqq邮箱](#mailqq邮箱)   
   - [参与贡献](#参与贡献)   

<!-- /MDTOC -->

# cve-ease project

## 介绍

cve-ease是一个专注于CVE信息的平台，它搜集了社区发布的各种CVE信息，并通过邮件、微信、钉钉等多种渠道及时通知用户。用户可以通过cve-ease平台查看CVE信息的详细内容，包括漏洞描述、影响范围、修复建议等，并根据自己的系统情况选择合适的修复方案。

cve-ease平台旨在帮助用户快速了解和应对系统中存在的漏洞，提高系统安全性和稳定性。

cve-ease是天翼云的自主创新项目，它已经在欧拉社区开放源码，期待社区的朋友们加入项目开发，共同打造一个安全、稳定、可靠的国产操作系统生态。

开源说明：

* 本仓库严格遵循 [木兰宽松许可证, 第2版](http://license.coscl.org.cn/MulanPSL2)
* 本仓库是在公司开源流程的指导下，经过严格的审核和准备，提交的优质开源项目，相关的文档和资料都已经完善和齐全
* 本仓库由公司指派专人负责，长期跟进维护，持续孵化产出


## 软件架构

cve-ease是一个专注于CVE信息的平台，它的架构主要由四个模块组成，分别是CVE爬虫、CVE分析器、CVE通知器和CVE前端。下面我们分别介绍这四个模块的功能和设计。

* CVE爬虫：这个模块负责从openEuler社区提供的各个CVE数据源抓取CVE信息，并将其存储到MySQL等关系型数据库中。这些关键信息主要来源于cve-manager项目。目前，cve-manager支持从以下数据源获取CVE信息：NVD、CNNVD、CNVD、RedHat、Ubuntu、Debian等。cve-ease使用Python编写了多个爬虫脚本，每个脚本对应一个数据源，可以定时或手动运行。爬虫脚本会将抓取到的原始CVE信息格式化后持久化存储，以便后续的分析和处理。
* CVE分析器：这个模块负责对CVE信息进行解析、归类、评分等操作。cve-ease使用Python编写了一个分析器脚本，它会定期从关系型数据库中读取原始CVE信息，并进行以下操作：解析CVE信息的基本属性（如编号、标题、描述等）、归类CVE信息的影响范围（如操作系统、软件包等）、评分CVE信息的危害程度（如CVSS评分等）、匹配CVE信息的修复建议（如补丁链接等）。分析器脚本会将处理后的结构化CVE信息以SQL格式持久化到数据库中，以便后续的查询和展示。
* CVE通知器：这个模块负责根据用户的订阅配置，通过邮件、微信、钉钉等方式发送CVE通知给用户。cve-ease使用Python编写了一个通知器脚本，它会定期从MySQL数据库中读取结构化CVE信息，并进行以下操作：过滤出用户关注的影响范围（如操作系统、软件包等）、生成适合不同渠道的通知内容（如文本、图片等）、调用不同渠道的API发送通知给用户（如SMTP协议发送邮件、HTTP协议发送微信或钉钉消息等）。通知器脚本会记录发送结果和反馈情况，并更新MySQL数据库中的订阅状态。
* CVE前端：这个模块负责提供一个友好的cli终端命令，让用户可以查看、搜索、订阅CVE信息。

cve-ease的架构设计旨在实现高效、灵活、可扩展的CVE信息平台，为用户提供及时准确地安全漏洞情报服务。

## 安装教程

目前cve-ease处于快速迭代研发阶段，支持的安装方式有，直接安装，容器安装，rpm包安装

### 直接安装

```shell
git clone https://gitee.com/openeuler/cve-ease cve-ease.git
cd cve-ease.git/cve-ease
make install
```

### 容器安装

```shell
git clone https://gitee.com/openeuler/cve-ease cve-ease.git
cd cve-ease.git/cve-ease
make run-in-docker
```

### rpm包安装

```shell
git clone https://gitee.com/openeuler/cve-ease cve-ease.git
cd cve-ease.git/cve-ease
make gensrpm
cd ..
rpm -ivh *.src.rpm
cd ~/rpmbuild
rpmbuild -ba SPECS/cve-ease.spec
cd RPMS/noarch
rpm -ivh *.rpm
```

## 使用说明

### 帮助信息

* cve-ease命令不带任何参数，则显示帮助信息
* cve-ease子命令有多个，按类别分为basic、info、notifier
* help子命令用于显示不同类别命令帮助信息

```shell
# cve-ease

Available commands:

basic commands:
      config                    Print cve-ease config
      daemon                    Run as daemon without interactive
      motd                      Motd info manager
      service                   Service manager

info commands:
      cve                       OpenEuler CVE info
      cvrf                      OpenEuler CVRF info
      db                        Database manager
      help                      List available commands
      logger                    Logger config
      repodata                  Repodata info
      rpm                       Rpm info
      sa                        OpenEuler security notice info

notifier commands:
      dingding                  Notifier of dingding
      feishu                    Notifier of feishu
      mail163                   Notifier of mail163
      mailqq                    Notifier of mailqq
      wecom                     Notifier of wecom

Try "cve-ease --help" for help about global gconfig
Try "cve-ease help" to get all available commands
Try "cve-ease <command> --help" for help about the gconfig of a particular command
Try "cve-ease help <category>" to get commands under a particular category
Available commands are: basic, info, notifier

# cve-ease help info
Available commands:

info commands:
      cve                       OpenEuler CVE info
      cvrf                      OpenEuler CVRF info
      db                        Database manager
      help                      List available commands
      logger                    Logger config
      repodata                  Repodata info
      rpm                       Rpm info
      sa                        OpenEuler security notice info

Try "cve-ease --help" for help about global gconfig
Try "cve-ease help" to get all available commands
Try "cve-ease <command> --help" for help about the gconfig of a particular command
Try "cve-ease help <category>" to get commands under a particular category
Available commands are: basic, info, notifier
2023-03-17 15:25:03,982 [DEBUG] cve-ease:  * close sql session properly
```

### basic基础命令

#### config配置相关子命令


#### daemon服务


#### motd更新通知相关子命令



#### service相关子命令



### info类别命令

#### cve子命令

爬取社区CVE公告信息

```shell
cve-ease cve -m
cve-ease cve -l
cve-ease cve -t
```

#### sa命令

安全公告相关

```shell
cve-ease sa -m
cve-ease sa -l
cve-ease sa -t
```

#### cvrf子命令

安全公告相关

```shell
cve-ease cvrf -m
cve-ease cvrf -l
cve-ease cvrf -t
```

### notifier消息通知类命令

#### wecom企业微信聊天机器人


#### dingding钉钉聊天机器人


#### feishu飞书聊天机器人


#### mail163邮箱




#### mailqq邮箱







## 参与贡献

1. Fork 本仓库
2. 当前快速迭代期间，仅 master 分支，因此您只需在 master 做变更后提交
3. 创建 pr ，描述清楚 pr 的具体功能、作用，并提供相关测试用例
4. 通知仓库 maintainer 审核 pr

---
